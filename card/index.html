<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card</title>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">

    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    
    <div id="cards"></div>

    <script>
        let card = [
            { 
            poster: "poster.jpg",
            title: "Тайная жизнь<br> домашних животных 2",
            player: "blu-ray.png",
            action: "action.png",
            sale: true,
            salePerc: .9,  // порценты акции
            price: 50,
            currency: "руб.",
            rank: 4.5,
            order: "buy.jpg"
            },

            { 
            poster: "toy4.jpg",
            title: "История игрушек 4<br> Приключения Вилкинса",
            player: "blu-ray.png",
            action: "action.png",
            sale: true,
            salePerc: .9,  // порценты акции
            price: 60,
            currency: "руб.",
            rank: 4,
            order: "buy.jpg"
            },

            { 
            poster: "ferd.jpg",
            title: "Фердинанд<br> Побег из коровника",
            player: "blu-ray.png",
            action: "action.png",
            sale: true,
            salePerc: .9,  // порценты акции
            price: 40,
            currency: "руб.",
            rank: 3.5,
            order: "buy.jpg"
            },

        ]; 


        let s = "";

        for (i = 0; i < card.length; i++) {

            // Полная стоимость
            let fullPrice = `${card[i].price},00 ${card[i].currency}`;
            console.log(fullPrice);
            
            // Стоимость акции
            let salePrice = `${Math.round(card[i].price * card[i].salePerc)},00 ${card[i].currency}`;
            console.log(salePrice);

            // Расчет рейтинга
            let stars = "";

            // for (i = 1; i <= card[i].rank; i++)
            //     stars += "star ";
            //     stars += "star_border";

            switch (card[i].rank) {
                case .5:
                stars = "star_half star_border star_border star_border star_border";
                break;

                case 1:
                stars = "star star_border star_border star_border star_border";
                break;

                case 1.5:
                stars = "star star_half star_border star_border star_border";
                break;

                case 2:
                stars = "star star star_border star_border star_border";
                break;

                case 2.5:
                stars = "star star star_half star_border star_border";
                break;

                case 3:
                stars = "star star star star_border star_border";
                break;

                case 3.5:
                stars = "star star star star_half star_border";
                break;

                case 4:
                stars = "star star star star star_border";
                break;

                case 4.5:
                stars = "star star star star star_half";
                break;

                case 5:
                stars = "star star star star star";
                break;

                default:
                stars = "star_border star_border star_border star_border star_border";
            }


            // Выбор цены
            let priceChange = "", vis = "";

            if (card[i].sale) {
                priceChange = `
                    <div>${salePrice}</div>
                    <div>${fullPrice}</div>
                    `;
                vis = `1`;
            } else {
                priceChange = `<div>${fullPrice}</div>`;
                vis = `0`;
            }



            s += `
                <div class="card">
                <div class="poster">
                    <img src="images/${card[i].poster}" alt="">
                    <img style="opacity: ${vis}" src="images/${card[i].action}" alt="">
                    <img src="images/${card[i].player}" alt="">
                </div>
                <div class="title">
                    ${card[i].title}
                </div>
                <div class="price">
                    ${priceChange}
                </div>
                <div class="rank">
                    <span class="material-icons">
                        ${stars}
                    </span>
                </div>
                <div class="buy">
                    <img src="images/${card[i].order}" alt="">
                </div>
            </div>
            `;
        
        }

        cards.innerHTML = s;

    </script>

</body>
</html>